# åºåˆ—å¸§åŠ¨ç”»åˆ¶ä½œå·¥å…·

ä¸€ä¸ªåŸºäº Web çš„åœ¨çº¿å·¥å…·ï¼Œç”¨äºä»è§†é¢‘æå–å¸§ã€è¿›è¡ŒæŠ å›¾å¤„ç†å¹¶ç”Ÿæˆ Spritesheet åºåˆ—å¸§åŠ¨ç”»ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. è§†é¢‘å¸§æå–
- æ”¯æŒ MP4ã€WebMã€MOV ç­‰å¸¸è§è§†é¢‘æ ¼å¼
- å¯è‡ªå®šä¹‰æå–å¸§ç‡ï¼ˆå»ºè®® 5~20 å¸§/ç§’ï¼‰
- å®æ—¶é¢„è§ˆæå–çš„å¸§
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ å’Œç‚¹å‡»ä¸Šä¼ 

### 2. å¸§é€‰æ‹©ä¸é¢„è§ˆ
- ç½‘æ ¼è§†å›¾å±•ç¤ºæ‰€æœ‰æå–çš„å¸§
- æ”¯æŒå•é€‰ã€å…¨é€‰ã€å–æ¶ˆå…¨é€‰
- å®æ—¶é¢„è§ˆé€‰ä¸­çš„å¸§åºåˆ—
- æ”¯æŒæ’­æ”¾/æš‚åœã€å¾ªç¯æ’­æ”¾
- å¯è°ƒèŠ‚æ’­æ”¾é€Ÿåº¦ï¼ˆ0.5xã€1xã€2xï¼‰

### 3. æ™ºèƒ½æŠ å›¾å¤„ç†
- **ç§»é™¤æ°´å°**ï¼šè‡ªåŠ¨ç§»é™¤å››ä¸ªè§’çš„æ°´å°åŒºåŸŸï¼ˆå¯è‡ªå®šä¹‰åŒºåŸŸæ¯”ä¾‹ï¼‰
- **ç§»é™¤èƒŒæ™¯**ï¼šæ™ºèƒ½æ£€æµ‹å¹¶ç§»é™¤èƒŒæ™¯è‰²ï¼ˆåŸºäºè¾¹ç¼˜è½®å»“é¢œè‰²åˆ†æï¼‰
- **åˆ†è¾¨ç‡è°ƒæ•´**ï¼šæ”¯æŒé¢„è®¾åˆ†è¾¨ç‡ï¼ˆ64pxã€128pxã€256pxã€512pxï¼‰æˆ–è‡ªå®šä¹‰åˆ†è¾¨ç‡
- å®æ—¶é¢„è§ˆå¤„ç†ç»“æœ

### 4. Spritesheet ç”Ÿæˆ
- è‡ªåŠ¨è®¡ç®—æœ€ä¼˜è¡Œåˆ—å¸ƒå±€ï¼ˆæ¥è¿‘æ­£æ–¹å½¢ï¼‰
- ç”Ÿæˆ PNG æ ¼å¼çš„ Spritesheet
- æ˜¾ç¤ºè¯¦ç»†çš„å°ºå¯¸å’Œå¸ƒå±€ä¿¡æ¯
- æ”¯æŒä¸€é”®ä¸‹è½½

### 5. å®æ—¶ç»Ÿè®¡
- ä½¿ç”¨ Firebase Realtime Database å®ç°è·¨è®¾å¤‡ã€è·¨ç”¨æˆ·çš„å®æ—¶ç»Ÿè®¡
- æ˜¾ç¤ºä»Šæ—¥ä½¿ç”¨æ¬¡æ•°å’Œæ€»ä½¿ç”¨æ¬¡æ•°
- è‡ªåŠ¨å›é€€åˆ° localStorageï¼ˆå¦‚æœ Firebase æœªé…ç½®ï¼‰

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
aispritesheetanimation/
â”œâ”€â”€ index.html          # ä¸»é¡µé¢ï¼ŒåŒ…å« HTML ç»“æ„å’Œ Firebase é…ç½®
â”œâ”€â”€ script.js           # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆè§†é¢‘å¤„ç†ã€å›¾åƒå¤„ç†ã€Spritesheet ç”Ÿæˆï¼‰
â”œâ”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ jszip.min.js        # JSZip åº“ï¼ˆç”¨äºæ‰“åŒ…ä¸‹è½½å¤„ç†åçš„å¸§ï¼‰
â”œâ”€â”€ icon.png            # é¡¹ç›®å›¾æ ‡
â”œâ”€â”€ build.js            # æ„å»ºè„šæœ¬ï¼ˆå¤åˆ¶æ–‡ä»¶åˆ° dist ç›®å½•ï¼‰
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ CNAME               # GitHub Pages è‡ªå®šä¹‰åŸŸåé…ç½®
â””â”€â”€ dist/               # æ„å»ºè¾“å‡ºç›®å½•
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šçº¯åŸç”Ÿ JavaScriptï¼ˆES6+ï¼‰
- **å›¾åƒå¤„ç†**ï¼šCanvas API
- **è§†é¢‘å¤„ç†**ï¼šHTML5 Video API + Canvas
- **å®æ—¶æ•°æ®åº“**ï¼šFirebase Realtime Database
- **æ•°æ®åˆ†æ**ï¼šGoogle Analytics
- **æ–‡ä»¶å‹ç¼©**ï¼šJSZip
- **æ„å»ºå·¥å…·**ï¼šNode.js

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

### 1. è§†é¢‘å¸§æå–æ¨¡å— (`script.js`)
- `extractFrames()` - ä»è§†é¢‘ä¸­æå–å¸§
- `addFrameToGrid()` - å°†å¸§æ·»åŠ åˆ°ç½‘æ ¼æ˜¾ç¤º
- ä½¿ç”¨ `requestVideoFrameCallback` API ä¼˜åŒ–æ€§èƒ½

### 2. å›¾åƒå¤„ç†æ¨¡å— (`script.js`)
- `processCutout()` - å¤„ç†æŠ å›¾
- `removeWatermarkFromCanvas()` - ç§»é™¤æ°´å°
- `removeBackgroundFromCanvas()` - ç§»é™¤èƒŒæ™¯
- `getBorderColorMode()` - æ£€æµ‹è¾¹ç¼˜é¢œè‰²ï¼ˆç”¨äºèƒŒæ™¯ç§»é™¤ï¼‰

### 3. Spritesheet ç”Ÿæˆæ¨¡å— (`script.js`)
- `generateSpritesheet()` - ç”Ÿæˆ Spritesheet
- è‡ªåŠ¨è®¡ç®—æœ€ä¼˜è¡Œåˆ—å¸ƒå±€
- æ”¯æŒè‡ªå®šä¹‰é—´è·

### 4. å®æ—¶ç»Ÿè®¡æ¨¡å— (`index.html`)
- Firebase Realtime Database é›†æˆ
- å®æ—¶æ•°æ®åŒæ­¥å’Œæ˜¾ç¤º
- localStorage å›é€€æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+ï¼ˆç”¨äºæ„å»ºï¼‰
- ç°ä»£æµè§ˆå™¨ï¼ˆæ”¯æŒ ES6+ã€Canvas APIã€Video APIï¼‰

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æœ¬åœ°å¼€å‘

ç›´æ¥æ‰“å¼€ `index.html` æ–‡ä»¶å³å¯ï¼Œæ— éœ€æ„å»ºã€‚

### æ„å»ºé¡¹ç›®

```bash
npm run build
```

æ„å»ºå®Œæˆåï¼Œæ‰€æœ‰æ–‡ä»¶ä¼šè¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

### Firebase é…ç½®

é¡¹ç›®å·²é›†æˆ Firebase Realtime Database ç”¨äºå®æ—¶ç»Ÿè®¡ã€‚é…ç½®ä½äº `index.html` ç¬¬ 24-33 è¡Œï¼š

```javascript
const firebaseConfig = {
    apiKey: "your-api-key",
    authDomain: "your-project.firebaseapp.com",
    databaseURL: "https://your-project-default-rtdb.firebaseio.com",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "your-messaging-sender-id",
    appId: "your-app-id",
    measurementId: "your-measurement-id"
};
```

**é‡è¦**ï¼š
1. éœ€è¦åœ¨ Firebase Console ä¸­å¯ç”¨ Realtime Database
2. é…ç½®æ•°æ®åº“å®‰å…¨è§„åˆ™å…è®¸è¯»å†™ `stats` è·¯å¾„ï¼š
   ```json
   {
     "rules": {
       "stats": {
         ".read": true,
         ".write": true
       }
     }
   }
   ```

### Google Analytics é…ç½®

Google Analytics é…ç½®ä½äº `index.html` ç¬¬ 10-16 è¡Œï¼š

```javascript
gtag('config', 'G-HHMQ09PZQJ');
```

æ›¿æ¢ä¸ºä½ çš„ Google Analytics æµ‹é‡ IDã€‚

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### Firebase æ•°æ®ç»“æ„

```
stats/
  â”œâ”€â”€ total: æ€»è®¿é—®æ¬¡æ•°
  â””â”€â”€ daily/
      â”œâ”€â”€ 2024-01-15: ä»Šæ—¥è®¿é—®æ¬¡æ•°
      â”œâ”€â”€ 2024-01-16: ä»Šæ—¥è®¿é—®æ¬¡æ•°
      â””â”€â”€ ...
```

### Google Analytics äº‹ä»¶

- `extract_frames` - æå–å¸§æ“ä½œ
- `process_cutout` - æŠ å›¾å¤„ç†æ“ä½œ
- `generate_spritesheet` - ç”Ÿæˆ Spritesheet æ“ä½œ

## ğŸš¢ éƒ¨ç½²

### éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡

1. æ„å»ºé¡¹ç›®ï¼š`npm run build`
2. å°† `dist` ç›®å½•ä¸­çš„æ–‡ä»¶ä¸Šä¼ åˆ°é™æ€æ‰˜ç®¡æœåŠ¡
3. ç¡®ä¿æœåŠ¡å™¨æ”¯æŒå•é¡µåº”ç”¨ï¼ˆSPAï¼‰è·¯ç”±

### éƒ¨ç½²é…ç½®ç¤ºä¾‹

- **ç›®æ ‡ç›®å½•**ï¼š`dist`
- **æ„å»ºå‘½ä»¤**ï¼š`npm run build`
- **Node.js ç‰ˆæœ¬**ï¼š18+

## ğŸ¯ ä½¿ç”¨æµç¨‹

1. **ä¸Šä¼ è§†é¢‘** - ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ è§†é¢‘æ–‡ä»¶
2. **æå–å¸§** - è®¾ç½®å¸§ç‡ï¼Œç‚¹å‡»"æå–å¸§"æŒ‰é’®
3. **é€‰æ‹©å¸§** - åœ¨ç½‘æ ¼ä¸­é€‰æ‹©éœ€è¦çš„å¸§ï¼ˆæ”¯æŒå…¨é€‰/å–æ¶ˆå…¨é€‰ï¼‰
4. **é¢„è§ˆå¸§** - ä½¿ç”¨é¢„è§ˆå·¥å…·æŸ¥çœ‹é€‰ä¸­çš„å¸§åºåˆ—
5. **æŠ å›¾å¤„ç†** - é…ç½®å¤„ç†é€‰é¡¹ï¼ˆç§»é™¤æ°´å°ã€ç§»é™¤èƒŒæ™¯ã€è°ƒæ•´åˆ†è¾¨ç‡ï¼‰
6. **ç”Ÿæˆ Spritesheet** - ç‚¹å‡»"ç”Ÿæˆ Spritesheet"æŒ‰é’®
7. **ä¸‹è½½** - ä¸‹è½½å¤„ç†åçš„å¸§æˆ– Spritesheet

## ğŸ”§ å¼€å‘è¯´æ˜

### æ ¸å¿ƒå…¨å±€å˜é‡

```javascript
let videoFile = null;              // è§†é¢‘æ–‡ä»¶å¯¹è±¡
let videoElement = null;           // è§†é¢‘ DOM å…ƒç´ 
let extractedFrames = [];         // æå–çš„å¸§æ•°ç»„
let selectedFrames = [];           // é€‰ä¸­çš„å¸§ç´¢å¼•æ•°ç»„
let processedFrames = [];         // å¤„ç†åçš„å¸§æ•°ç»„
let generatedSpritesheet = null;   // ç”Ÿæˆçš„ Spritesheet å¯¹è±¡
```

### å…³é”®å‡½æ•°

- `loadVideo(file)` - åŠ è½½è§†é¢‘æ–‡ä»¶
- `extractFrames()` - æå–è§†é¢‘å¸§
- `processCutout()` - å¤„ç†æŠ å›¾
- `generateSpritesheet()` - ç”Ÿæˆ Spritesheet
- `updateUsageStats(action)` - æ›´æ–°ä½¿ç”¨ç»Ÿè®¡

### è¿›åº¦æŒ‡ç¤ºå™¨

é¡¹ç›®åŒ…å« 5 æ­¥è¿›åº¦æŒ‡ç¤ºå™¨ï¼š
1. ä¸Šä¼ è§†é¢‘
2. æå–å¸§
3. é€‰æ‹©å¸§
4. æŠ å›¾å¤„ç†
5. ç”Ÿæˆ Spritesheet

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šéœ€è¦æ”¯æŒ ES6+ã€Canvas APIã€Video API
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§è§†é¢‘æ–‡ä»¶å¤„ç†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
3. **å†…å­˜ä½¿ç”¨**ï¼šæå–çš„å¸§ä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¤§è§†é¢‘å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜
4. **Firebase é…é¢**ï¼šæ³¨æ„ Firebase å…è´¹å¥—é¤çš„é™åˆ¶

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ ä½œè€…

å¤§è¯AIç»„ - æ¸¸é€»è¾‘å·¥ä½œå®¤

## ğŸ”— ç›¸å…³é“¾æ¥

- [Bilibili ä¸»é¡µ](https://space.bilibili.com/2378399)
